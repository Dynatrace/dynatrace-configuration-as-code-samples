# Cursor AI Rules for Dynatrace Configuration-as-Code Samples

## Repository Overview
Dynatrace Configuration-as-Code samples demonstrating Monaco CLI and Terraform usage for observability automation. Focus on production-ready, secure, well-documented configurations.

## Critical Rules

### ğŸ” Security First
- NEVER hardcode credentials, tokens, or secrets
- ALWAYS use environment variables for sensitive data
- CREATE `.env.example` files with `<PLACEHOLDER>` format
- REQUIRE OAuth authentication for Platform environments
- MARK sensitive Terraform variables with `sensitive = true`

### ğŸ“¦ Version Requirements (January 2026)
- Monaco: >= 2.28.0 (latest stable preferred)
- Terraform: >= 1.0.0
- Dynatrace Provider: >= 1.89.0 (check registry for latest): [Terraform Registry](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest)
- Document version requirements in every README

### ğŸ”§ Monaco Standards
```yaml
manifestVersion: 1.0  # Always unquoted
auth:
  oAuth:              # Preferred over API tokens
    clientId:
      type: environment
      name: CLIENT_ID
```

### ğŸ—ï¸ Terraform Standards
```hcl
terraform {
  required_providers {
    dynatrace = {
      version = "~> 1.90"
      source  = "dynatrace-oss/dynatrace"
    }
  }
}
```

### ğŸ“ Documentation Requirements
Every sample MUST have:
- Title
- Clear use case description
- Prerequisites with versions
- Complete OAuth or platform token scope list (example see below)
- Project / File structure (example see below)
- Getting started: Step-by-step setup
- Images/Screenshots of the expected outcome (where applicable)
- Cleanup/deletion instructions
- Troubleshooting section

### ğŸ”‘ OAuth Scopes
Document all required scopes:
```markdown
## Required OAuth Scopes
- `settings:objects:read`, `settings:objects:write`
- `document:documents:read`, `document:documents:write`
- [Feature-specific scopes]
```

### ğŸ—‚ï¸ File Organization
```
sample-name/
â”œâ”€â”€ README.md
â”œâ”€â”€ providers.tf
â”œâ”€â”€ main.tf / manifest.yaml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â””â”€â”€ config / or terraform files (e.g., variables.tf, locals.tf, output.tf, etc.)
```

### ğŸš« Never Do
- Never use Terraform provider < 1.85.0
- Mix OAuth and API token auth in same sample
- Hardcode entity IDs (use references)
- Omit cleanup instructions
- Reference deprecated APIs
- Forget `.gitignore` for `.env`

### âœ… Always Do
- Use latest stable versions
- Document OAuth scopes completely
- Provide `.env.example`
- Include validation steps
- Test deployment instructions
- Use descriptive configuration IDs
- Add troubleshooting tips

### ğŸ› ï¸ Common Commands
```bash
# Monaco
monaco deploy manifest.yaml
monaco deploy --dry-run manifest.yaml
monaco delete -m manifest.yaml

# Terraform
terraform init && terraform plan
terraform apply
terraform destroy
```

### ğŸ¯ Code Review Checklist
- [ ] No hardcoded credentials
- [ ] Latest provider versions
- [ ] OAuth scopes documented
- [ ] README complete
- [ ] `.env.example` exists
- [ ] Cleanup instructions
- [ ] Tested deployment

### ğŸ“š Quick Links
- [Dynatrace configuration as code documentation](https://docs.dynatrace.com/docs/shortlink/configuration-as-code)
- [Terraform Provider](https://registry.terraform.io/providers/dynatrace-oss/dynatrace/latest)
- [Authentication Guide](https://docs.dynatrace.com/docs/shortlink/terraform-api-support-access-permission-handling)

---
**Active Dynatrace Environment**: wkf10640.apps.dynatrace.com  
**Use Dynatrace MCP tools** to validate configurations and query environment state
